Реляционная модель данных для интернет‑магазина с товарами, вариантами, корзинами, заказами, платежами, складами и остатками. Репозиторий содержит схему, скрипты для ее наполнения, view, запросы

Что внутри
Чёткая предметная модель (товары → варианты → категории → корзина → заказ → платеж).
Гибкая расширяемость через JSONB‑атрибуты товара.
Продуманная стратегия индексов и ограничений целостности.
Ссылка на ER диаграмму бд:
https://drive.google.com/file/d/1vApf61J7_IjRontGyQLQas0k4moxFoX1/view?usp=sharing

Индексы: 
1 Индексы на внешних ключах
PostgreSQL не создаёт индексы на FK автоматически.
Для этого создаются B‑Tree индексы на всех FK. Эффект: ускорение JOIN и поисковых операций на больших таблицах.

2 Уникальные индексы и технические ключи
products(slug) UNIQUE, categories(slug) UNIQUE, warehouses(code) UNIQUE, orders(order_number) UNIQUE.
Эффект: защита от дубликатов, быстрый поиск.

VIEW
1) v_category_product_counts — «Товары по категориям»

Назначение:
Сводка по категориям: сколько товаров всего и сколько активных в каждой, плюс даты самого раннего создания и последнего обновления товара в категории. Удобно для витрин каталога, аудита наполнения и приоритизации контента.

Отвечает на вопросы:
Сколько товаров в каждой категории и сколько из них активны?
Есть ли «пустые» категории (0 товаров)?
Когда в категории последний раз обновляли товары?
Какие категории растут/затихли по активности контента?

2) v_inventory_availability — «Доступность на складах и стоимость»

Единая витрина остатков по складам и вариациям с расчётом:
- доступного к продаже количества,
- стоимости запасов по себестоимости,
- потенциальной выручки по текущей цене.
Используется в операционном контроле, закупках, планировании и продажах.

Отвечает на вопросы
Сколько товара доступно прямо сейчас на каждом складе?
Какова стоимость запасов (по cost) и потенциальная выручка (по price)?
Где дефицит/перезапас по брендам/товарам/вариациям?

3) v_orders_daily_summary — «Ежедневная сводка по заказам и оплатам»

Ежедневный срез: количество заказов, уникальные покупатели, количество позиций, валовая выручка, полученные платежи и текущая задолженность. Используется в операционной отчётности и мониторинге кассовых разрывов.

Отвечает на вопросы
Сколько заказов и покупателей в день?
Какой объём товаров продан (items_qty)?
Какая валовая выручка и сколько платежей получено?
Какая задолженность остаётся на конец дня?








